<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>List, Query, Manipulate System Processes • ps</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="List, Query, Manipulate System Processes">
<meta property="og:description" content="List, query and manipulate all system processes, on Windows,
    Linux and macOS.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ps</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/ps">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="ps" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#ps" class="anchor"></a>ps</h1></div>
<blockquote>
<p>List, Query, Manipulate System Processes</p>
</blockquote>
<p><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a> <a href="https://travis-ci.org/r-lib/ps"><img src="https://travis-ci.org/r-lib/ps.svg?branch=master" alt="Travis build status"></a> <a href="https://ci.appveyor.com/project/gaborcsardi/ps"><img src="https://ci.appveyor.com/api/projects/status/github/r-lib/ps?branch=master&amp;svg=true" alt="AppVeyor build status"></a> <a href="https://cran.r-project.org/package=ps"><img src="https://www.r-pkg.org/badges/version/ps" alt="CRAN status"></a> <a href="https://www.r-pkg.org/pkg/ps"><img src="https://cranlogs.r-pkg.org/badges/ps" alt="CRAN RStudio mirror downloads"></a> <a href="https://codecov.io/github/r-lib/ps?branch=master"><img src="https://codecov.io/gh/r-lib/ps/branch/master/graph/badge.svg" alt="Coverage status"></a></p>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>ps implement an API to query and manipulate system processes. Most of its code is based on the <a href="https://github.com/giampaolo/psutil">psutil</a> Python package.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Once released, you can install the released version of ps from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">"ps"</span>)</a></code></pre></div>
</div>
<div id="supported-platforms" class="section level2">
<h2 class="hasAnchor">
<a href="#supported-platforms" class="anchor"></a>Supported platforms</h2>
<p>ps currently supports Windows (from Vista), macOS and Linux systems. On unsupported platforms the package can be installed and loaded, but all of its functions fail with an error of class <code>"not_implemented"</code>.</p>
</div>
<div id="listing-all-processes" class="section level2">
<h2 class="hasAnchor">
<a href="#listing-all-processes" class="anchor"></a>Listing all processes</h2>
<p><code><a href="reference/ps_pids.html">ps_pids()</a></code> returns all process ids on the system. This can be useful to iterate over all processes.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(ps)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="reference/ps_pids.html">ps_pids</a></span>()[<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>]</a></code></pre></div>
<pre><code>##  [1]  0  1 51 52 55 56 57 59 62 63 64 65 70 74 76 77 82 83 85 87</code></pre>
<p><code><a href="reference/ps.html">ps()</a></code> is similar, but it returns a data frame (tibble if you have the tibble package available), with data about each process:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="reference/ps.html">ps</a></span>()</a></code></pre></div>
<pre><code>## # A tibble: 428 x 11
##      pid  ppid name            username   status     user  system       rss        vms created             ps_handle   
##  * &lt;int&gt; &lt;int&gt; &lt;chr&gt;           &lt;chr&gt;      &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt; &lt;dttm&gt;              &lt;I(list)&gt;   
##  1 82481 82466 R               gaborcsar… running  0.556   0.0921 110751744    2.71e 9 2018-07-21 08:00:04 &lt;S3: ps_han…
##  2 82466 82232 R               gaborcsar… running  1.58    0.128  120696832    2.69e 9 2018-07-21 08:00:01 &lt;S3: ps_han…
##  3 82302  3718 Google Chrome … gaborcsar… running  0.0619  0.0256  43884544    3.36e 9 2018-07-21 07:59:25 &lt;S3: ps_han…
##  4 82301     1 quicklookd      gaborcsar… running  0.0822  0.0311  25055232    3.09e 9 2018-07-21 07:59:16 &lt;S3: ps_han…
##  5 82232 42530 R               gaborcsar… running  0.721   0.0883 102371328    2.66e 9 2018-07-21 07:58:48 &lt;S3: ps_han…
##  6 81150     1 applessdstatis… root       running NA      NA             NA   NA       2018-07-21 07:36:08 &lt;S3: ps_han…
##  7 80990     1 ocspd           root       running NA      NA             NA   NA       2018-07-21 07:14:52 &lt;S3: ps_han…
##  8 80975     1 netbiosd        _netbios   running NA      NA             NA   NA       2018-07-21 03:03:28 &lt;S3: ps_han…
##  9 80936     1 aslmanager      root       running NA      NA             NA   NA       2018-07-21 03:03:22 &lt;S3: ps_han…
## 10 80886 37083 docker          gaborcsar… running  0.264   0.147    8130560    5.70e11 2018-07-20 22:14:34 &lt;S3: ps_han…
## # ... with 418 more rows</code></pre>
</div>
<div id="process-api" class="section level2">
<h2 class="hasAnchor">
<a href="#process-api" class="anchor"></a>Process API</h2>
<p>This is a short summary of the API. Please see the documentation of the various methods for details, in particular regarding handles to finished processes and pid reuse. See also “Finished and zombie processes” and “pid reuse” below.</p>
<p><code><a href="reference/ps_handle.html">ps_handle(pid)</a></code> creates a process handle for the supplied process id. If <code>pid</code> is omitted, a handle to the calling process is returned:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">p &lt;-<span class="st"> </span><span class="kw"><a href="reference/ps_handle.html">ps_handle</a></span>()</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">p</a></code></pre></div>
<pre><code>## &lt;ps::ps_handle&gt; PID=82481, NAME=R, AT=2018-07-21 08:00:04</code></pre>
<div id="query-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#query-functions" class="anchor"></a>Query functions</h3>
<p><code><a href="reference/ps_pid.html">ps_pid(p)</a></code> returns the pid of the process.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="reference/ps_pid.html">ps_pid</a></span>(p)</a></code></pre></div>
<pre><code>## [1] 82481</code></pre>
<p><code><a href="reference/ps_create_time.html">ps_create_time()</a></code> returns the creation time of the process (according to the OS).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="reference/ps_create_time.html">ps_create_time</a></span>(p)</a></code></pre></div>
<pre><code>## [1] "2018-07-21 08:00:04 GMT"</code></pre>
<p>The process id and the creation time uniquely identify a process in a system. ps uses them to make sure that it reports information about, and manipulates the correct process.</p>
<p><code><a href="reference/ps_is_running.html">ps_is_running(p)</a></code> returns whether <code>p</code> is still running. It handles pid reuse safely.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="reference/ps_is_running.html">ps_is_running</a></span>(p)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p><code><a href="reference/ps_ppid.html">ps_ppid(p)</a></code> returns the pid of the parent of <code>p</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="reference/ps_ppid.html">ps_ppid</a></span>(p)</a></code></pre></div>
<pre><code>## [1] 82466</code></pre>
<p><code><a href="reference/ps_ppid.html">ps_parent(p)</a></code> returns a process handle to the parent process of <code>p</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="reference/ps_ppid.html">ps_parent</a></span>(p)</a></code></pre></div>
<pre><code>## &lt;ps::ps_handle&gt; PID=82466, NAME=R, AT=2018-07-21 08:00:01</code></pre>
<p><code><a href="reference/ps_name.html">ps_name(p)</a></code> returns the name of the program <code>p</code> is running.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="reference/ps_name.html">ps_name</a></span>(p)</a></code></pre></div>
<pre><code>## [1] "R"</code></pre>
<p><code><a href="reference/ps_exe.html">ps_exe(p)</a></code> returns the full path to the executable the <code>p</code> is running.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="reference/ps_exe.html">ps_exe</a></span>(p)</a></code></pre></div>
<pre><code>## [1] "/Library/Frameworks/R.framework/Versions/3.5/Resources/bin/exec/R"</code></pre>
<p><code><a href="reference/ps_cmdline.html">ps_cmdline(p)</a></code> returns the command line (executable and arguments) of <code>p</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw"><a href="reference/ps_cmdline.html">ps_cmdline</a></span>(p)</a></code></pre></div>
<pre><code>## [1] "/Library/Frameworks/R.framework/Resources/bin/exec/R"                          
## [2] "--no-site-file"                                                                
## [3] "--slave"                                                                       
## [4] "--no-save"                                                                     
## [5] "--no-restore"                                                                  
## [6] "-f"                                                                            
## [7] "/var/folders/59/0gkmw1yj2w7bf2dfc3jznv5w0000gn/T//RtmpFkaGcx/file1422216241c6e"</code></pre>
<p><code><a href="reference/ps_status.html">ps_status(p)</a></code> returns the status of the process. Possible values are OS dependent, but typically there is <code>"running"</code> and <code>"stopped"</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw"><a href="reference/ps_status.html">ps_status</a></span>(p)</a></code></pre></div>
<pre><code>## [1] "running"</code></pre>
<p><code><a href="reference/ps_username.html">ps_username(p)</a></code> returns the name of the user the process belongs to.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw"><a href="reference/ps_username.html">ps_username</a></span>(p)</a></code></pre></div>
<pre><code>## [1] "gaborcsardi"</code></pre>
<p><code><a href="reference/ps_uids.html">ps_uids(p)</a></code> and <code><a href="reference/ps_uids.html">ps_gids(p)</a></code> return the real, effective and saved user ids of the process. They are only implemented on POSIX systems.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="cf">if</span> (<span class="kw"><a href="reference/ps_os_type.html">ps_os_type</a></span>()[[<span class="st">"POSIX"</span>]]) <span class="kw"><a href="reference/ps_uids.html">ps_uids</a></span>(p)</a></code></pre></div>
<pre><code>##      real effective     saved 
##       501       501       501</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="cf">if</span> (<span class="kw"><a href="reference/ps_os_type.html">ps_os_type</a></span>()[[<span class="st">"POSIX"</span>]]) <span class="kw"><a href="reference/ps_uids.html">ps_gids</a></span>(p)</a></code></pre></div>
<pre><code>##      real effective     saved 
##        20        20        20</code></pre>
<p><code><a href="reference/ps_cwd.html">ps_cwd(p)</a></code> returns the current working directory of the process.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw"><a href="reference/ps_cwd.html">ps_cwd</a></span>(p)</a></code></pre></div>
<pre><code>## [1] "/Users/gaborcsardi/works/ps"</code></pre>
<p><code><a href="reference/ps_terminal.html">ps_terminal(p)</a></code> returns the name of the terminal of the process, if any. For processes without a terminal, and on Windows it returns <code>NA_character_</code>.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw"><a href="reference/ps_terminal.html">ps_terminal</a></span>(p)</a></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p><code><a href="reference/ps_environ.html">ps_environ(p)</a></code> returns the environment variables of the process. <code><a href="reference/ps_environ.html">ps_environ_raw(p)</a></code> does the same, in a different form. Typically they reflect the environment variables at the start of the process.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="kw"><a href="reference/ps_environ.html">ps_environ</a></span>(p)[<span class="kw">c</span>(<span class="st">"TERM"</span>, <span class="st">"USER"</span>, <span class="st">"SHELL"</span>, <span class="st">"R_HOME"</span>)]</a></code></pre></div>
<pre><code>## TERM                                xterm-256color
## USER                                gaborcsardi
## SHELL                               /bin/zsh
## R_HOME                              /Library/Frameworks/R.framework/Resources</code></pre>
<p><code><a href="reference/ps_num_threads.html">ps_num_threads(p)</a></code> returns the current number of threads of the process.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw"><a href="reference/ps_num_threads.html">ps_num_threads</a></span>(p)</a></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p><code><a href="reference/ps_cpu_times.html">ps_cpu_times(p)</a></code> returns the CPU times of the process, similarly to <code>proc.time()</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="kw"><a href="reference/ps_cpu_times.html">ps_cpu_times</a></span>(p)</a></code></pre></div>
<pre><code>##            user          system    childen_user children_system 
##       0.7643302       0.1081009              NA              NA</code></pre>
<p><code><a href="reference/ps_memory_info.html">ps_memory_info(p)</a></code> returns memory usage information. See the manual for details.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="kw"><a href="reference/ps_memory_info.html">ps_memory_info</a></span>(p)</a></code></pre></div>
<pre><code>##        rss        vms    pfaults    pageins 
##  123568128 2699939840      31487          0</code></pre>
<p><code><a href="reference/ps_children.html">ps_children(p)</a></code> lists all child processes (potentially recuirsively) of the current process.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="kw"><a href="reference/ps_children.html">ps_children</a></span>(<span class="kw"><a href="reference/ps_ppid.html">ps_parent</a></span>(p))</a></code></pre></div>
<pre><code>## [[1]]
## &lt;ps::ps_handle&gt; PID=82481, NAME=R, AT=2018-07-21 08:00:04</code></pre>
</div>
<div id="process-manipulation" class="section level3">
<h3 class="hasAnchor">
<a href="#process-manipulation" class="anchor"></a>Process manipulation</h3>
<p><code><a href="reference/ps_suspend.html">ps_suspend(p)</a></code> suspends (stops) the process. On POSIX it sends a SIGSTOP signal. On Windows it stops all threads.</p>
<p><code><a href="reference/ps_resume.html">ps_resume(p)</a></code> resumes the process. On POSIX it sends a SIGCONT signal. On Windows it resumes all stopped threads.</p>
<p><code><a href="reference/ps_send_signal.html">ps_send_signal(p)</a></code> sends a signal to the process. It is implemented on POSIX systems only. It makes an effort to work around pid reuse.</p>
<p><code><a href="reference/ps_terminate.html">ps_terminate(p)</a></code> send SIGTERM to the process. On POSIX systems only.</p>
<p><code><a href="reference/ps_kill.html">ps_kill(p)</a></code> terminates the process. Sends <code>SIGKILL</code> on POSIX systems, uses <code>TerminateProcess()</code> on Windows. It make an effort to work around pid reuse.</p>
</div>
</div>
<div id="finished-and-zombie-processes" class="section level2">
<h2 class="hasAnchor">
<a href="#finished-and-zombie-processes" class="anchor"></a>Finished and zombie processes</h2>
<p>ps handles finished and Zombie processes as much as possible.</p>
<p>The essential <code><a href="reference/ps_pid.html">ps_pid()</a></code>, <code><a href="reference/ps_create_time.html">ps_create_time()</a></code>, <code><a href="reference/ps_is_running.html">ps_is_running()</a></code> functions and the <code>format()</code> and <code>print()</code> methods work for all processes, including finished and zombie processes. Other functions fail with an error of class <code>"no_such_process"</code> for finished processes.</p>
<p>The <code><a href="reference/ps_ppid.html">ps_ppid()</a></code>, <code><a href="reference/ps_ppid.html">ps_parent()</a></code>, <code><a href="reference/ps_children.html">ps_children()</a></code>, <code><a href="reference/ps_name.html">ps_name()</a></code>, <code><a href="reference/ps_status.html">ps_status()</a></code>, <code><a href="reference/ps_username.html">ps_username()</a></code>, <code><a href="reference/ps_uids.html">ps_uids()</a></code>, <code><a href="reference/ps_uids.html">ps_gids()</a></code>, <code><a href="reference/ps_terminal.html">ps_terminal()</a></code>, <code><a href="reference/ps_children.html">ps_children()</a></code> and the signal sending functions work properly for zombie processes. Other functions fail with <code>"zombie_process"</code> error.</p>
</div>
<div id="pid-reuse" class="section level2">
<h2 class="hasAnchor">
<a href="#pid-reuse" class="anchor"></a>Pid reuse</h2>
<p>ps functions handle pid reuse as well as technically possible.</p>
<p>The query functions never return information about the wrong process, even if the process has finished and its process id was re-assigned.</p>
<p>On Windows, the process manipulation functions never manipulate the wrong process.</p>
<p>On POSIX systems, this is technically impossible, it is not possible to send a signal to a process without creating a race condition. In ps the time window of the race condition is very small, a few microseconds, and the process would need to finish, <em>and</em> the OS would need to reuse its pid within this time window to create problems. This is very unlikely to happen.</p>
</div>
<div id="recipes" class="section level2">
<h2 class="hasAnchor">
<a href="#recipes" class="anchor"></a>Recipes:</h2>
<p>In the spirit of <a href="http://psutil.readthedocs.io/en/latest/#recipes">psutil recipes</a>.</p>
<div id="find-process-by-name" class="section level3">
<h3 class="hasAnchor">
<a href="#find-process-by-name" class="anchor"></a>Find process by name</h3>
<p>Using <code><a href="reference/ps.html">ps()</a></code> and dplyr:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a></code></pre></div>
<pre><code>## 
## Attaching package: 'dplyr'</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">find_procs_by_name &lt;-<span class="st"> </span><span class="cf">function</span>(name) {</a>
<a class="sourceLine" id="cb50-2" data-line-number="2">  <span class="kw"><a href="reference/ps.html">ps</a></span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb50-3" data-line-number="3"><span class="st">    </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(name <span class="op">==</span><span class="st"> </span><span class="op">!!</span>name)  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb50-4" data-line-number="4"><span class="st">    </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(ps_handle)</a>
<a class="sourceLine" id="cb50-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb50-6" data-line-number="6"></a>
<a class="sourceLine" id="cb50-7" data-line-number="7"><span class="kw">find_procs_by_name</span>(<span class="st">"R"</span>)</a></code></pre></div>
<pre><code>## [[1]]
## &lt;ps::ps_handle&gt; PID=82481, NAME=R, AT=2018-07-21 08:00:04
## 
## [[2]]
## &lt;ps::ps_handle&gt; PID=82466, NAME=R, AT=2018-07-21 08:00:01
## 
## [[3]]
## &lt;ps::ps_handle&gt; PID=82232, NAME=R, AT=2018-07-21 07:58:48
## 
## [[4]]
## &lt;ps::ps_handle&gt; PID=74578, NAME=R, AT=2018-07-20 13:36:22
## 
## [[5]]
## &lt;ps::ps_handle&gt; PID=60390, NAME=R, AT=2018-07-20 11:03:10
## 
## [[6]]
## &lt;ps::ps_handle&gt; PID=32703, NAME=R, AT=2018-07-18 16:51:35
## 
## [[7]]
## &lt;ps::ps_handle&gt; PID=28777, NAME=R, AT=2018-07-18 08:30:28
## 
## [[8]]
## &lt;ps::ps_handle&gt; PID=24580, NAME=R, AT=2018-07-18 08:28:05</code></pre>
<p>Without creating the full table of processes:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">find_procs_by_name &lt;-<span class="st"> </span><span class="cf">function</span>(name) {</a>
<a class="sourceLine" id="cb52-2" data-line-number="2">  procs &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="kw"><a href="reference/ps_pids.html">ps_pids</a></span>(), <span class="cf">function</span>(p) {</a>
<a class="sourceLine" id="cb52-3" data-line-number="3">    <span class="kw">tryCatch</span>({</a>
<a class="sourceLine" id="cb52-4" data-line-number="4">      h &lt;-<span class="st"> </span><span class="kw"><a href="reference/ps_handle.html">ps_handle</a></span>(p)</a>
<a class="sourceLine" id="cb52-5" data-line-number="5">      <span class="cf">if</span> (<span class="kw"><a href="reference/ps_name.html">ps_name</a></span>(h) <span class="op">==</span><span class="st"> </span>name) h <span class="cf">else</span> <span class="ot">NULL</span> },</a>
<a class="sourceLine" id="cb52-6" data-line-number="6">      <span class="dt">no_such_process =</span> <span class="cf">function</span>(e) <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb52-7" data-line-number="7">      <span class="dt">access_denied =</span> <span class="cf">function</span>(e) <span class="ot">NULL</span></a>
<a class="sourceLine" id="cb52-8" data-line-number="8">    )</a>
<a class="sourceLine" id="cb52-9" data-line-number="9">  })</a>
<a class="sourceLine" id="cb52-10" data-line-number="10">  procs[<span class="op">!</span><span class="kw">vapply</span>(procs, is.null, <span class="kw">logical</span>(<span class="dv">1</span>))]</a>
<a class="sourceLine" id="cb52-11" data-line-number="11">  }</a>
<a class="sourceLine" id="cb52-12" data-line-number="12"></a>
<a class="sourceLine" id="cb52-13" data-line-number="13"><span class="kw">find_procs_by_name</span>(<span class="st">"R"</span>)</a></code></pre></div>
<pre><code>## [[1]]
## &lt;ps::ps_handle&gt; PID=24580, NAME=R, AT=2018-07-18 08:28:05
## 
## [[2]]
## &lt;ps::ps_handle&gt; PID=28777, NAME=R, AT=2018-07-18 08:30:28
## 
## [[3]]
## &lt;ps::ps_handle&gt; PID=32703, NAME=R, AT=2018-07-18 16:51:35
## 
## [[4]]
## &lt;ps::ps_handle&gt; PID=60390, NAME=R, AT=2018-07-20 11:03:10
## 
## [[5]]
## &lt;ps::ps_handle&gt; PID=74578, NAME=R, AT=2018-07-20 13:36:22
## 
## [[6]]
## &lt;ps::ps_handle&gt; PID=82232, NAME=R, AT=2018-07-21 07:58:48
## 
## [[7]]
## &lt;ps::ps_handle&gt; PID=82466, NAME=R, AT=2018-07-21 08:00:01
## 
## [[8]]
## &lt;ps::ps_handle&gt; PID=82481, NAME=R, AT=2018-07-21 08:00:04</code></pre>
</div>
<div id="kill-process-tree" class="section level3">
<h3 class="hasAnchor">
<a href="#kill-process-tree" class="anchor"></a>Kill process tree</h3>
<p>This sends a signal, so it’ll only work on Unix. Use <code><a href="reference/ps_kill.html">ps_kill()</a></code> instead of <code><a href="reference/ps_send_signal.html">ps_send_signal()</a></code> on Windows.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">kill_proc_tree &lt;-<span class="st"> </span><span class="cf">function</span>(pid, <span class="dt">sig =</span> <span class="kw"><a href="reference/signals.html">signals</a></span>()<span class="op">$</span>SIGTERM,</a>
<a class="sourceLine" id="cb54-2" data-line-number="2">                           <span class="dt">include_parent =</span> <span class="ot">TRUE</span>) {</a>
<a class="sourceLine" id="cb54-3" data-line-number="3">  <span class="cf">if</span> (pid <span class="op">==</span><span class="st"> </span><span class="kw">Sys.getpid</span>() <span class="op">&amp;&amp;</span><span class="st"> </span>include_parent) <span class="kw">stop</span>(<span class="st">"I refuse to kill myself"</span>)</a>
<a class="sourceLine" id="cb54-4" data-line-number="4">  parent &lt;-<span class="st"> </span><span class="kw"><a href="reference/ps_handle.html">ps_handle</a></span>(pid)</a>
<a class="sourceLine" id="cb54-5" data-line-number="5">  children &lt;-<span class="st"> </span><span class="kw"><a href="reference/ps_children.html">ps_children</a></span>(parent, <span class="dt">recursive =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb54-6" data-line-number="6">  <span class="cf">if</span> (include_parent) children &lt;-<span class="st"> </span><span class="kw">c</span>(children, parent)</a>
<a class="sourceLine" id="cb54-7" data-line-number="7">  <span class="cf">for</span> (p <span class="cf">in</span> children) <span class="kw"><a href="reference/ps_send_signal.html">ps_send_signal</a></span>(p, sig)</a>
<a class="sourceLine" id="cb54-8" data-line-number="8">  running &lt;-<span class="st"> </span><span class="kw">vapply</span>(children, ps_is_running, <span class="kw">logical</span>(<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb54-9" data-line-number="9">  <span class="kw">list</span>(<span class="dt">gone =</span> children[<span class="op">!</span>running], <span class="dt">alive =</span> children[running])</a>
<a class="sourceLine" id="cb54-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb54-11" data-line-number="11"></a>
<a class="sourceLine" id="cb54-12" data-line-number="12">p1 &lt;-<span class="st"> </span>processx<span class="op">::</span>process<span class="op">$</span><span class="kw">new</span>(<span class="st">"sleep"</span>, <span class="st">"10"</span>)</a>
<a class="sourceLine" id="cb54-13" data-line-number="13">p2 &lt;-<span class="st"> </span>processx<span class="op">::</span>process<span class="op">$</span><span class="kw">new</span>(<span class="st">"sleep"</span>, <span class="st">"10"</span>)</a>
<a class="sourceLine" id="cb54-14" data-line-number="14">p3 &lt;-<span class="st"> </span>processx<span class="op">::</span>process<span class="op">$</span><span class="kw">new</span>(<span class="st">"sleep"</span>, <span class="st">"10"</span>)</a>
<a class="sourceLine" id="cb54-15" data-line-number="15"><span class="kw">kill_proc_tree</span>(<span class="kw">Sys.getpid</span>(), <span class="dt">include_parent =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## $gone
## list()
## 
## $alive
## $alive[[1]]
## &lt;ps::ps_handle&gt; PID=82493, NAME=???, AT=2018-07-21 08:00:05
## 
## $alive[[2]]
## &lt;ps::ps_handle&gt; PID=82494, NAME=???, AT=2018-07-21 08:00:05
## 
## $alive[[3]]
## &lt;ps::ps_handle&gt; PID=82495, NAME=???, AT=2018-07-21 08:00:05</code></pre>
</div>
</div>
<div id="contributions" class="section level2">
<h2 class="hasAnchor">
<a href="#contributions" class="anchor"></a>Contributions</h2>
<p>Please note that this project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>BSD © RStudio</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/r-lib/ps">https://​github.com/​r-lib/​ps</a>
</li>
<li>Report a bug at <br><a href="https://github.com/r-lib/issues">https://​github.com/​r-lib/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/BSD-3-Clause">BSD_3_clause</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jay Loden <br><small class="roles"> Author </small>  </li>
<li>Dave Daeschler <br><small class="roles"> Author </small>  </li>
<li>Giampaolo Rodola' <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://github.com/gaborcsardi">Gábor Csárdi</a> <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jay Loden, Dave Daeschler, Giampaolo Rodola', <a href="https://github.com/gaborcsardi">Gábor Csárdi</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
